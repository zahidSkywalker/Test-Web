{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminOrders=()=>{const[orders,setOrders]=useState([]);const[page,setPage]=useState(1);const[totalPages,setTotalPages]=useState(1);const[loading,setLoading]=useState(false);const[status,setStatus]=useState('');const[paymentStatus,setPaymentStatus]=useState('');const fetchOrders=async function(){let p=arguments.length>0&&arguments[0]!==undefined?arguments[0]:page;setLoading(true);try{const params=new URLSearchParams();params.set('page',String(p));params.set('limit','20');if(status)params.set('status',status);if(paymentStatus)params.set('paymentStatus',paymentStatus);const res=await axios.get(\"/api/orders/admin?\".concat(params.toString()));setOrders(res.data.orders);setTotalPages(res.data.pagination.totalPages);}finally{setLoading(false);}};useEffect(()=>{fetchOrders();},[page,status,paymentStatus]);const updateStatus=async(id,newStatus)=>{await axios.put(\"/api/orders/\".concat(id,\"/status\"),{orderStatus:newStatus});await fetchOrders();};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-semibold mb-4\",children:\"Admin Orders\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3 flex gap-2 items-center\",children:[/*#__PURE__*/_jsxs(\"select\",{className:\"border p-2\",value:status,onChange:e=>{setStatus(e.target.value);setPage(1);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Statuses\"}),/*#__PURE__*/_jsx(\"option\",{value:\"pending\",children:\"Pending\"}),/*#__PURE__*/_jsx(\"option\",{value:\"confirmed\",children:\"Confirmed\"}),/*#__PURE__*/_jsx(\"option\",{value:\"processing\",children:\"Processing\"}),/*#__PURE__*/_jsx(\"option\",{value:\"shipped\",children:\"Shipped\"}),/*#__PURE__*/_jsx(\"option\",{value:\"delivered\",children:\"Delivered\"}),/*#__PURE__*/_jsx(\"option\",{value:\"cancelled\",children:\"Cancelled\"})]}),/*#__PURE__*/_jsxs(\"select\",{className:\"border p-2\",value:paymentStatus,onChange:e=>{setPaymentStatus(e.target.value);setPage(1);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Payments\"}),/*#__PURE__*/_jsx(\"option\",{value:\"pending\",children:\"Pending\"}),/*#__PURE__*/_jsx(\"option\",{value:\"paid\",children:\"Paid\"}),/*#__PURE__*/_jsx(\"option\",{value:\"failed\",children:\"Failed\"}),/*#__PURE__*/_jsx(\"option\",{value:\"refunded\",children:\"Refunded\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"border rounded overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full text-left\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"p-2\",children:\"Order #\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-2\",children:\"User\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-2\",children:\"Total\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-2\",children:\"Payment\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-2\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-2\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:loading?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"6\",className:\"p-2\",children:\"Loading...\"})}):orders.map(o=>{var _o$user;return/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"p-2\",children:o.orderNumber}),/*#__PURE__*/_jsx(\"td\",{className:\"p-2\",children:((_o$user=o.user)===null||_o$user===void 0?void 0:_o$user.name)||'—'}),/*#__PURE__*/_jsxs(\"td\",{className:\"p-2\",children:[o.total,\" \",o.currency]}),/*#__PURE__*/_jsx(\"td\",{className:\"p-2\",children:o.paymentStatus}),/*#__PURE__*/_jsx(\"td\",{className:\"p-2\",children:o.orderStatus}),/*#__PURE__*/_jsx(\"td\",{className:\"p-2\",children:/*#__PURE__*/_jsx(\"select\",{className:\"border p-1\",value:o.orderStatus,onChange:e=>updateStatus(o._id,e.target.value),children:['pending','confirmed','processing','shipped','delivered','cancelled'].map(s=>/*#__PURE__*/_jsx(\"option\",{value:s,children:s},s))})})]},o._id);})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"border px-2\",disabled:page<=1,onClick:()=>setPage(p=>Math.max(1,p-1)),children:\"Prev\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Page \",page,\" / \",totalPages]}),/*#__PURE__*/_jsx(\"button\",{className:\"border px-2\",disabled:page>=totalPages,onClick:()=>setPage(p=>p+1),children:\"Next\"})]})]});};export default AdminOrders;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","AdminOrders","orders","setOrders","page","setPage","totalPages","setTotalPages","loading","setLoading","status","setStatus","paymentStatus","setPaymentStatus","fetchOrders","p","arguments","length","undefined","params","URLSearchParams","set","String","res","get","concat","toString","data","pagination","updateStatus","id","newStatus","put","orderStatus","className","children","value","onChange","e","target","colSpan","map","o","_o$user","orderNumber","user","name","total","currency","_id","s","disabled","onClick","Math","max"],"sources":["/workspace/client/src/pages/Admin/Orders.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\n\nconst AdminOrders = () => {\n  const [orders, setOrders] = useState([]);\n  const [page, setPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(1);\n  const [loading, setLoading] = useState(false);\n  const [status, setStatus] = useState('');\n  const [paymentStatus, setPaymentStatus] = useState('');\n\n  const fetchOrders = async (p = page) => {\n    setLoading(true);\n    try {\n      const params = new URLSearchParams();\n      params.set('page', String(p));\n      params.set('limit', '20');\n      if (status) params.set('status', status);\n      if (paymentStatus) params.set('paymentStatus', paymentStatus);\n      const res = await axios.get(`/api/orders/admin?${params.toString()}`);\n      setOrders(res.data.orders);\n      setTotalPages(res.data.pagination.totalPages);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchOrders();\n  }, [page, status, paymentStatus]);\n\n  const updateStatus = async (id, newStatus) => {\n    await axios.put(`/api/orders/${id}/status`, { orderStatus: newStatus });\n    await fetchOrders();\n  };\n\n  return (\n    <div className=\"p-4\">\n      <h1 className=\"text-xl font-semibold mb-4\">Admin Orders</h1>\n\n      <div className=\"mb-3 flex gap-2 items-center\">\n        <select className=\"border p-2\" value={status} onChange={e=>{setStatus(e.target.value); setPage(1);}}>\n          <option value=\"\">All Statuses</option>\n          <option value=\"pending\">Pending</option>\n          <option value=\"confirmed\">Confirmed</option>\n          <option value=\"processing\">Processing</option>\n          <option value=\"shipped\">Shipped</option>\n          <option value=\"delivered\">Delivered</option>\n          <option value=\"cancelled\">Cancelled</option>\n        </select>\n        <select className=\"border p-2\" value={paymentStatus} onChange={e=>{setPaymentStatus(e.target.value); setPage(1);}}>\n          <option value=\"\">All Payments</option>\n          <option value=\"pending\">Pending</option>\n          <option value=\"paid\">Paid</option>\n          <option value=\"failed\">Failed</option>\n          <option value=\"refunded\">Refunded</option>\n        </select>\n      </div>\n\n      <div className=\"border rounded overflow-x-auto\">\n        <table className=\"w-full text-left\">\n          <thead>\n            <tr className=\"border-b\">\n              <th className=\"p-2\">Order #</th>\n              <th className=\"p-2\">User</th>\n              <th className=\"p-2\">Total</th>\n              <th className=\"p-2\">Payment</th>\n              <th className=\"p-2\">Status</th>\n              <th className=\"p-2\">Actions</th>\n            </tr>\n          </thead>\n          <tbody>\n            {loading ? (\n              <tr><td colSpan=\"6\" className=\"p-2\">Loading...</td></tr>\n            ) : (\n              orders.map(o => (\n                <tr key={o._id} className=\"border-b\">\n                  <td className=\"p-2\">{o.orderNumber}</td>\n                  <td className=\"p-2\">{o.user?.name || '—'}</td>\n                  <td className=\"p-2\">{o.total} {o.currency}</td>\n                  <td className=\"p-2\">{o.paymentStatus}</td>\n                  <td className=\"p-2\">{o.orderStatus}</td>\n                  <td className=\"p-2\">\n                    <select className=\"border p-1\" value={o.orderStatus} onChange={e=>updateStatus(o._id, e.target.value)}>\n                      {['pending','confirmed','processing','shipped','delivered','cancelled'].map(s=> (\n                        <option key={s} value={s}>{s}</option>\n                      ))}\n                    </select>\n                  </td>\n                </tr>\n              ))\n            )}\n          </tbody>\n        </table>\n      </div>\n\n      <div className=\"mt-3 flex items-center gap-2\">\n        <button className=\"border px-2\" disabled={page<=1} onClick={()=>setPage(p=>Math.max(1, p-1))}>Prev</button>\n        <span>Page {page} / {totalPages}</span>\n        <button className=\"border px-2\" disabled={page>=totalPages} onClick={()=>setPage(p=>p+1)}>Next</button>\n      </div>\n    </div>\n  );\n};\n\nexport default AdminOrders;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}